// Get anime ID from URL
const urlParams = new URLSearchParams(window.location.search);
const animeId = urlParams.get('id');

if (!animeId) {
  document.body.innerHTML = "<h2>No anime selected.</h2>";
} else {
  fetch('data/anime.json')
    .then(response => response.json())
    .then(animeList => {
      const anime = animeList.find(a => a.id === animeId);
      if (!anime) {
        document.body.innerHTML = "<h2>Anime not found.</h2>";
        return;
      }

      // Populate details
      document.getElementById('anime-title').textContent = anime.title;
      document.getElementById('anime-image').src = anime.image;
      document.getElementById('anime-image').alt = anime.title;
      document.getElementById('anime-description').textContent = anime.description;

      // Episodes
      const episodeList = document.getElementById('episode-list');
      anime.episodes.forEach((ep, index) => {
        const li = document.createElement('li');
        const link = document.createElement('a');
        link.textContent = ep;
        link.href = `watch.html?id=${anime.id}&ep=${index + 1}`;
        li.appendChild(link);
        episodeList.appendChild(li);
      });
    })
    .catch(error => {
      console.error('Error loading anime data:', error);
    });
}
